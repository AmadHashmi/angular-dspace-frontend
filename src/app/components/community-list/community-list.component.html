<div class="container">
  <h2>Communities</h2>

  @if (loading) {
  <div class="loading">
    <p>Loading communities...</p>
  </div>
  } @else if (error) {
  <div class="error">
    <p>{{ error }}</p>
    <button (click)="retry()" class="retry-btn">Retry</button>
  </div>
  } @else if (communities.length === 0) {
  <div class="empty-state">
    <p>No communities found.</p>
    <button (click)="retry()" class="retry-btn">Refresh</button>
  </div>
  } @else {
  <div class="grid">
    @for (community of communities; track community.uuid) {
    <div class="card" (click)="goToCollectionsList(community)">
      <h3>{{ community.name || "Untitled Community" }}</h3>
      <p>Handle: {{ community["handle"] || "N/A" }}</p>
      <p>Items: {{ community["archivedItemsCount"] || 0 }}</p>
    </div>
    }
  </div>

  <app-pagination
    [pagination]="pagination"
    [currentPage]="currentPage"
    [loading]="loading"
    (pageChange)="onPageChange($event)"
    (pageSizeChange)="onPageSizeChange($event)"
  >
  </app-pagination>
  }
</div>
