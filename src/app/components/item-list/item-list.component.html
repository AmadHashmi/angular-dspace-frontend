<div class="container">
  <div class="header">
    <div class="breadcrumb">
      <span class="breadcrumb-item" (click)="goBackToCommunities()"
        >Communities</span
      >
      @if (community) {
      <span class="breadcrumb-separator">/</span>
      <span class="breadcrumb-item" (click)="goBackToCollections()">{{
        community.name || "Untitled Community"
      }}</span>
      } @if (collection) {
      <span class="breadcrumb-separator">/</span>
      <span class="breadcrumb-item active">{{
        collection.name || "Untitled Collection"
      }}</span>
      }
    </div>

    <h2>Items</h2>
    @if (collection) {
    <p class="collection-name">
      in {{ collection.name || "Untitled Collection" }}
    </p>
    }
  </div>

  @if (loading) {
  <div class="loading">
    <p>Loading items...</p>
  </div>
  } @else if (error) {
  <div class="error">
    <p>{{ error }}</p>
    <button (click)="retry()" class="retry-btn">Retry</button>
  </div>
  } @else if (items.length === 0) {
  <div class="empty-state">
    <p>No items found in this collection.</p>
    <button (click)="retry()" class="retry-btn">Refresh</button>
  </div>
  } @else {

  <div class="items-container">
    <div class="items-count">
      Showing {{ items.length }} item{{ items.length !== 1 ? "s" : "" }}
    </div>

    <div class="items-list">
      @for (item of items; track item.uuid) {
      <div class="item-card">
        <div class="item-content">
          <h3 class="item-title">{{ item['name'] || 'Untitled Item' }}</h3>
          <p class="item-author">Author: {{ item['author'] || 'Unknown Author' }}</p>
        </div>
      </div>
      }
    </div>

    <app-pagination
      [pagination]="pagination"
      [currentPage]="currentPage"
      [pageSize]="pageSize"
      [loading]="loading"
      [entityType]="'items'"
      (pageChange)="onPageChange($event)"
      (pageSizeChange)="onPageSizeChange($event)"
    >
    </app-pagination>
  </div>
  }
</div>
